<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>viewmodeltest.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
#include "ViewModelTest.h"

#include "../common/etlbase.h"
#include "../viewmodel/viewmodel.h"
#include "../model/model.h"

<span style = "background-color:#dfd">std::shared_ptr&lt;ViewModelClass&gt; vmdl(std::make_shared&lt;ViewModelClass&gt;());
std::shared_ptr&lt;ModelClass&gt; model(std::make_shared&lt;ModelClass&gt;());</span>

void Test_BST()
<span style = "background-color:#dfd">{</span>
    //case 1 BST Insert
<span style = "background-color:#dfd">    bool bRet = vmdl-&gt;modelInsert(20);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(15);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(25);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(12);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(10);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(11);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(22);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(1);</span>

    //case 2 BST Find
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(2);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(29);//29 is not exist
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(2);</span>

    //case 3 BST delete
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(28);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(20);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(20);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(20);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(10);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(10);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(10);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(3);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(33);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(3);  //33 is not exist</span>
<span style = "background-color:#dfd">}</span>

void Test_AVL()
<span style = "background-color:#dfd">{</span>
    //case 5 AVL Insert
    bool bRet;
<span style = "background-color:#dfd">    for(int i = 5; i &lt;= 15; i++)</span>
    {
<span style = "background-color:#dfd">        bRet = vmdl-&gt;modelInsert(i);
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(5);</span>
<span style = "background-color:#dfd">    }
    bRet = vmdl-&gt;modelInsert(0);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(18);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(17);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(16);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(1);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(2);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelInsert(3);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(5);</span>

    //case 6 AVL Find
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(18);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(6);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(1);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(6);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(33);//33 is not exist
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(6);</span>

    //case 7 AVL delete
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(18);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(18);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(18);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(15);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(15);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(15);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(1);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(1);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(1);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(7);</span>


<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(33);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(7);  //33 is not exist</span>
<span style = "background-color:#dfd">}</span>

void Test_SPlayTree()
<span style = "background-color:#dfd">{</span>
    //case 8 SPlayTree Insert
    bool bRet;
<span style = "background-color:#dfd">    for(int i = 14; i &lt;= 30; i++)</span>
    {
<span style = "background-color:#dfd">        bRet = vmdl-&gt;modelInsert(i);
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(8);</span>
<span style = "background-color:#dfd">    }
    bRet = vmdl-&gt;modelInsert(0);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(8);</span>

    //case 9 SPlayTree Find
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(9);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(14);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(9);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(33);//33 is not exist
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(9);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(14);//33 is not exist
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(9);</span>

    //case 10 SPlayTree delete
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(28);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(28);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(14);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(14);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(14);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(22);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(22);
    if( !bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>
<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelFind(22);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(10);</span>

<span style = "background-color:#dfd">    bRet = vmdl-&gt;modelDelete(33);
    if( bRet )</span>
<span style = "background-color:#fdd">        throw int(10);  //33 is not exist</span>


<span style = "background-color:#dfd">}</span>

bool ViewModel_Test() throw()
<span style = "background-color:#dfd">{
    try {</span>

<span style = "background-color:#dfd">        vmdl-&gt;SetModel(model);</span>

        //change Data Structure
<span style = "background-color:#dfd">        std::string Data_Structure = "Binary Search Tree";
        bool bRet = vmdl-&gt;modelChangeMode(Data_Structure);
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(4);</span>

<span style = "background-color:#dfd">        Test_BST();</span>

        //change Data Structure
<span style = "background-color:#dfd">        Data_Structure = "AVL Tree";
        bRet = vmdl-&gt;modelChangeMode(Data_Structure);
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(4);</span>

<span style = "background-color:#dfd">        Test_AVL();</span>

        //change Data Structure
<span style = "background-color:#dfd">        Data_Structure = "SPlay Tree";
        bRet = vmdl-&gt;modelChangeMode(Data_Structure);
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(4);</span>

<span style = "background-color:#dfd">        Test_SPlayTree();</span>

        //Pre Order
<span style = "background-color:#dfd">        bRet = vmdl-&gt;modelPreOrder();
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(11);</span>

        //In Order
<span style = "background-color:#dfd">        bRet = vmdl-&gt;modelInOrder();
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(12);</span>

        //Post Order
<span style = "background-color:#dfd">        bRet = vmdl-&gt;modelPostOrder();
        if( !bRet )</span>
<span style = "background-color:#fdd">            throw int(13);</span>

<span style = "background-color:#dfd">    }</span>
    catch (int&amp; v) {
<span style = "background-color:#fdd">        printf("case %d error\n", v);
        return false;
    }</span>
    catch (...) {
<span style = "background-color:#fdd">        printf("exception\n");
        return false;
    }</span>
<span style = "background-color:#dfd">    return true;
}</span></pre>
	</body>
</html>